<link href="tutorial.css" rel="stylesheet" />

**March 2022**  |  **v1.0**

[â†© å›é¦–é ](README.md)

05 é–‹ç™¼æ…£ä¾‹
================================
ğŸ¯ æœ¬ç¯€ä½¿ç”¨åœ¨ç« ç¯€ Â«[03 Translate ç¯„ä¾‹](03_TRANSLATE_EXAMPLE.md)Â» ä¸­æ‰€å¯¦ä½œçš„ `API` å…§å®¹ã€‚ä½ å°‡æœƒæŒæ¡ï¼š

  1. å°ˆæ¡ˆç›®éŒ„çµæ§‹çš„è¦ç¯„ã€‚
  2. å¦‚ä½•æ‰¾å°‹å°ˆæ¡ˆæœå‹™å°æ‡‰çš„è¦æ ¼æ–‡ä»¶æ”¾ç½®ä½ç½®ã€‚
  3. å¦‚ä½•é–±è®€å°ˆæ¡ˆæœå‹™ä¸­çš„è¦æ ¼å…§å®¹ã€‚

----------------------------------------------------------------
#### ç›®éŒ„
  - [å°ˆæ¡ˆç›®éŒ„çµæ§‹èˆ‡å‘½åè¦ç¯„](#å°ˆæ¡ˆç›®éŒ„çµæ§‹èˆ‡å‘½åè¦ç¯„)
  - [æ–‡ä»¶ç›®éŒ„çµæ§‹èˆ‡è¦æ ¼ç¯„ä¾‹](#æ–‡ä»¶ç›®éŒ„çµæ§‹èˆ‡è¦æ ¼ç¯„ä¾‹)
----------------------------------------------------------------

### å°ˆæ¡ˆç›®éŒ„çµæ§‹èˆ‡å‘½åè¦ç¯„

â ¿ ä¾ç…§æ…£ä¾‹ï¼Œæ¯å€‹å°ˆæ¡ˆè³‡æ–™å¤¾å…§ï¼Œæ‡‰è©²è‡³å°‘æœƒæœ‰é€™äº›è³‡æ–™å¤¾èˆ‡æª”æ¡ˆé…ç½®ã€‚ä¸¦éµå®ˆä»¥ä¸‹é–‹ç™¼æ…£ä¾‹ã€‚

  - **æª”æ¡ˆé…ç½æ…£ä¾‹ï¼š**
    ```
    ğŸ“„ app.go
    ğŸ“„ go.mod
    ğŸ“ internal/
      ğŸ“„ appContext.go
    ğŸ“ model/
      ğŸ“„ postTransferResult.go
    ğŸ“ resource/
      ğŸ“„ translateResource.go
      ğŸ“ args/
        ğŸ“„ postTranslateArgs.go
    ğŸ“ provider/
      ğŸ“„ googleTranslateProvider.go
    ```
    **æª”æ¡ˆé…ç½®èªªæ˜ï¼š**

    - [**app.go**](#file-appgo)

      æ‡‰ç”¨ç¨‹å¼çš„é€²å…¥é»ã€‚é€™å€‹æª”æ¡ˆå®šç¾©æ‡‰ç”¨ç¨‹å¼çš„<span class="underline">**ç¨‹å¼é€²å…¥é»**</span> `main()`ï¼Œä¾æ“šè¦å•Ÿå‹•çš„ *AppContext* é¡å‹ï¼Œä»¥åŠæ‡‰ç¨‹å¼çš„ä¸­ä»‹å…ƒä»¶ (*middleware*)ï¼Œé€²è¡Œåˆå§‹åŒ–ï¼Œä¸¦æ–¼å•Ÿå‹•å¾Œé–‹å§‹æ¥æ”¶è«‹æ±‚ã€‚

      > ğŸ“Œ *Golang* çš„æ‡‰ç”¨ç¨‹å¼é€²å…¥é»ç‚º `main()` å‡½å¼ã€‚

      > ğŸ“ *AppContext* å‹åˆ¥æŒ‡çš„æ˜¯ *application context* ï¼ˆæ‡‰ç”¨ç¨‹å¼å·¥ä½œç’°å¢ƒï¼‰ï¼Œé€šå¸¸ç‚ºä¸€å€‹å‹åˆ¥æˆ–å­æ¨¡çµ„ï¼Œé€™å€‹å…ƒä»¶æä¾›æ‡‰ç”¨ç¨‹å¼åˆå§‹åŒ–æ™‚æœŸï¼Œæ‰€éœ€è¦çš„åŸºç¤è³‡æºèˆ‡æ“ä½œï¼šæ¯”å¦‚æœå‹™å¼•æ“ã€ç¶²è·¯å”å®šã€æ‡‰ç”¨ç¨‹å¼è¨­å®šå€¼â€¦â€¦ç­‰ã€‚

      > ğŸ“ ä¸­ä»‹å…ƒä»¶ï¼ˆ*middleware*ï¼‰æ˜¯è¨­è¨ˆç”¨ä¾†æä¾›æ‡‰ç”¨ç¨‹å¼å¢å¼·åŸºç¤åŠŸèƒ½çš„æ“´å……å…ƒä»¶ï¼Œé–‹ç™¼è€…å¯è¦–éœ€è¦æ·»åŠ æ—¢æœ‰çš„ä¸­ä»‹å…ƒä»¶æˆ–è‡ªè¡Œå¯¦ä½œæ‰€éœ€å…ƒä»¶ã€‚

    - **go.mod**

      `go mod init` æŒ‡ä»¤æ‰€ç”¢ç”Ÿçš„æ¨¡çµ„ç®¡ç†è¨­å®šæª”ã€‚

      > ğŸ¾ æœ‰é—œ `go mod init` çš„ç”¨æ³•èˆ‡èªªæ˜åƒè€ƒï¼šhttps://golang.org/ref/mod#go-mod-init

    - ğŸ“ **internal/**

      *AppContext* ç›¸é—œçš„æ‡‰ç”¨ç¨‹å¼æ ¸å¿ƒæª”æ¡ˆçš†é…ç½®æ–¼æ­¤ç›®éŒ„ã€‚

      - [**appContext.go**](#internalappcontextgo)

        æ‡‰ç”¨ç¨‹å¼ *AppContext* å‹åˆ¥ç›¸é—œç¨‹å¼ç¢¼ã€‚

    - ğŸ“ **model/**

      æ”¾ç½®å…±ç”¨çš„æ¨¡å‹ç‰©ä»¶ç›®éŒ„ã€‚

      - [**postTransferResult.go**](#)

        ç¬¬ä¸‰æ–¹è³‡æºæˆ–æœå‹™ *repository* å‹åˆ¥ç›¸é—œç¨‹å¼ç¢¼å›æ‡‰çš„æ¨¡å‹ç‰©ä»¶ã€‚

    - ğŸ“ **resource/**

      æ”¾ç½®è™•ç† Web API *url path* è«‹æ±‚çš„ *Resource* çš„ç›®éŒ„ã€‚

      - [**translateResource.go**](#)

        æä¾›ç¯„ä¾‹ä½¿ç”¨çš„ /Translate å‘¼å«è™•ç†çš„ Resourceã€‚

    - ğŸ“ **resource/args/**

      æ”¾ç½®è™•ç† Web API *url path* è«‹æ±‚è¼¸å…¥åƒæ•¸ *Args* ç‰©ä»¶çš„å­ç›®éŒ„ã€‚

      - [**postTranslateArgs.go**](#)

        æä¾›ç¯„ä¾‹ä½¿ç”¨çš„ /Translate å‘¼å«è™•ç†çš„çš„è¼¸å…¥åƒæ•¸ Argsã€‚

    - ğŸ“ **provider/**

      æ”¾ç½®å¯¦ä½œç¬¬ä¸‰æ–¹è³‡æºæˆ–æœå‹™çš„ *Provider* çš„ç›®éŒ„ã€‚

      - [**googleTranslateProvider.go**](#)

        æä¾›ç¯„ä¾‹ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ `Translate` å‘¼å«è™•ç†çš„ Providerã€‚

  - **å‘½åæ…£ä¾‹ï¼š**
    1. é€²å…¥é»æª”æ¡ˆä¸€å¾‹å‘½å **app.go**ã€‚
    2. **internal** ç›®éŒ„å…§ï¼Œé…ç½®å°ˆæ¡ˆæ‡‰è©²ç¨‹å¼æ‰€éœ€çš„åŸºç¤æ ¸å¿ƒå…ƒä»¶ã€‚
    3. æ‡‰ç”¨ç¨‹å¼æ‰€ä½¿ç”¨çš„**AppContext**ï¼Œä»¥ `AppContext` ä¾†å‘½åã€‚
        > ğŸ” ç›®å‰åœ¨åœ¨è‹¥å¹²æ—©æœŸå°ˆæ¡ˆä»å¯çœ‹åˆ°ä»¥ `App` ä½œç‚º **AppContext** ä¾†å‘½åã€‚é€™äº›å°ˆæ¡ˆå°‡æœƒåœ¨æœªä¾†é™¸çºŒæ›´æ–°ã€‚
    4. **model** ç›®éŒ„å…§ï¼Œé…ç½®ä½œç‚ºå…±ç”¨çš„ *http method* åŠ  *url path* çš„ *Result* ã€‚
    5. **resource** ç›®éŒ„å…§ï¼Œé…ç½®ä½œç‚ºè™•ç† *url path* çš„ *Reource*ã€‚
    6. **resource/args** ç›®éŒ„å…§ï¼Œé…ç½®ä½œç‚ºè™•ç†è«‹æ±‚è¼¸å…¥åƒæ•¸ *http method* åŠ  *url path* çš„ *Args*ã€‚
    7. **repository** ç›®éŒ„å…§ï¼Œé…ç½®ä½œç‚ºè™•ç†ç¬¬ä¸‰æ–¹è³‡æºæˆ–æœå‹™çš„ *Repository*ã€‚

[ğŸ”å›ç›®éŒ„](#%e7%9b%ae%e9%8c%84)


----------------


## æ–‡ä»¶ç›®éŒ„çµæ§‹èˆ‡è¦æ ¼ç¯„ä¾‹

â ¿ ä¸€èˆ¬æƒ…æ³ä¸‹ï¼Œæ¯å€‹å°ˆæ¡ˆçš†æœƒä½¿ç”¨ `Git` ç”¨æ–¼åšç‰ˆæœ¬æ§åˆ¶ï¼Œè€Œå°ˆæ¡ˆå…§çš„ç›®éŒ„çµ„æˆè¦ç¯„å¦‚ä¸‹ï¼š
    
1. æ¯å€‹å°ˆæ¡ˆæ ¹ç›®éŒ„éƒ½æœƒæœ‰ `doc` çš„ç›®éŒ„ï¼Œç”¨æ–¼å­˜æ”¾æœå‹™çš„è¦æ ¼æ–‡ä»¶ã€è¨­è¨ˆæ–‡ä»¶...ç­‰ç­‰ã€‚
ç›®éŒ„çµæ§‹ç¯„ä¾‹ï¼š
  ```
   ğŸ“ DemoService
   ğŸ“ doc
     ğŸ“„ DemoService_API_Specification.md
  ```

2. DemoService API è¦æ ¼çš„ç¯„ä¾‹ï¼Œå¦‚ä¸‹ï¼š

-----------------------------------------------------------
#### ç›®éŒ„
- [API è¦æ ¼](#api-è¦æ ¼)
  - /Translate ç¿»è­¯ç›¸é—œ
      - [Get](#get-translate) : å–å¾—ç¿»è­¯çµæœ
-----------------------------------------------------------

#### API è¦æ ¼

##### Get /Translate
_å–å¾—å­—ä¸²ç¿»è­¯çµæœã€‚_

  **è·¯å¾‘**: `/Translate`

  **è«‹æ±‚**:
  - **æŸ¥è©¢å­—ä¸²**:
    - **SOURCE_LANGUAGE** `required`  : æŒ‡ç¤ºé€²è¡Œç•¶å‰ç¿»è­¯å…§å®¹çš„èªè¨€ã€‚    
          
      > â€» è¼¸å…¥åˆ—èˆ‰å€¼ç‚º [å„åœ‹èªè¨€ä»£ç¢¼è¡¨`]()

    - **TARGET_LANGUAGE** `required`  : æŒ‡ç¤ºé€²è¡Œç•¶å‰ç¿»è­¯çµæœçš„èªè¨€ã€‚
  - **æ¨™é ­**:
    - **Content-Type**: `application/json; charset=utf-8`
  - **åƒæ•¸**:
    - **content** `required` : ç¿»è­¯å…§å®¹ã€‚

  **å›æ‡‰**:
  - **æ¨™é ­**:
    - **Content-Type**: `text/plain; charset=utf-8`
  - **æ¬„ä½**:
    - **translation** : ç¿»è­¯çµæœã€‚

  **éŒ¯èª¤**:

  **ç¯„ä¾‹**:

<details>
  <summary><b>ç”¨ä¾‹: ä¸­æ–‡ç¿»è­¯è‹±æ–‡æ“ä½œ </b></summary>

  - **è«‹æ±‚**
    ```json
    GET /Translate?SOURCE_LANGUAGE=zh-CN&TARGET_LANGUAGE=en  HTTP/1.1
    Host: <server>
    Content-Type: application/json; charset=utf-8

    {
      "content": "èªªæ˜"
    }
    ```

  - **å›æ‡‰**
    ```json
    200 OK
    Content-Type: text/plain; charset=utf-8

    {
      "translation": "illustrate"
    }
    ```
</details>

[ğŸ”å›ç›®éŒ„](#ç›®éŒ„)


----------

